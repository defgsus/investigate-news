

CHANNEL_CATEGORIES_MAP = {
    "ard": {
        100: "index",
        101: "news",
        170: "weather",
        200: "sport",
        300: "program",
        400: "culture",
        420: "gossip",
        440: "internal",
        500: "sport",
        570: "extra",
        580: "lotto",
        590: "undefined",
        650: "sport",
        700: "stocks",
        770: "internal",
        790: "index",
        800: "undefined",
    },
    "3sat": {
        100: "index",
        111: "news",
        160: "stocks",
        180: "undefined",
        200: "sport",
        280: "lotto",
        300: "program",
        400: "index",
        401: "weather",
        450: "traffic",
        500: "culture",
        600: "index",
        601: "internal",
    },
    "ndr": {
        100: "index",
        108: "weather",
        112: "news",
        200: "sport",
        300: "program",
        450: "extra",
        500: "index",
        501: "internal",
        520: "health",
        530: "regional",
        540: "cooking",
        550: "program",
        560: "index",
        561: "internal",
        565: "news",
        570: "program",
        590: "cooking",
        600: "index",
        601: "lotto",
        610: "stocks",
        630: "news",
        650: "index",
        651: "weather",
        680: "calendar",
        700: "traffic",
        800: "sport",
        870: "extra",
    },
    "ntv": {
        100: "index",
        105: "news",
        120: "sport",
        140: "weather",
        150: "poll",
        155: "commercial",
        160: "living",
        170: "sport",
        200: "stocks",
        400: "commercial",
        410: "undefined",
        500: "program",
        550: "travel",
        580: "commercial",
        880: "internal",
    },
    "sr": {
        100: "index",
        110: "news",
        160: "weather",
        200: "sport",
        300: "program",
        470: "undefined",
        500: "service",
        520: "lotto",
        540: "traffic",
        560: "culture",
        598: "traffic",
        600: "sport",
        700: "undefined",
        810: "extra",
    },
    "wdr": {
        100: "index",
        101: "news",
        180: "weather",
        200: "sport",
        300: "program",
        500: "service",
        550: "lotto",
        555: "traffic",
        570: "service",
        600: "sport",
        681: "traffic",
        700: "internal",
        800: "extra",
    },
    "zdf": {
        100: "index",
        112: "news",
        170: "weather",
        200: "sport",
        300: "program",
        400: "sport",
        500: "service",
        555: "lotto",
        575: "traffic",
        600: "stocks",
        700: "service",
        750: "undefined",  # actually is olympic games right now
    },
    "zdf-info": {
        100: "index",
        112: "news",
        170: "weather",
        200: "sport",
        300: "program",
        500: "service",
        555: "lotto",
        575: "traffic",
        600: "stocks",
        700: "service",
        750: "undefined",
    },
    "zdf-neo": {
        100: "index",
        112: "news",
        170: "weather",
        200: "sport",
        300: "program",
        500: "service",
        555: "lotto",
        575: "traffic",
        600: "stocks",
        700: "service",
        750: "undefined",
    },
}


def get_page_category(channel: str, page: int, timestamp: str) -> str:
    if channel not in CHANNEL_CATEGORIES_MAP:
        raise ValueError(f"Channel '{channel}' not in CHANNEL_CATEGORIES_MAP")

    last_category = "undefined"
    for num in sorted(CHANNEL_CATEGORIES_MAP[channel]):
        categories = CHANNEL_CATEGORIES_MAP[channel]

        if page == num:
            return categories[num]
        if num > page:
            return last_category
        last_category = categories[num]

    return last_category
